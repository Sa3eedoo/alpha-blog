<div style="font-family:'Poppins',sans-serif; max-width:800px; margin:0 auto;">
  <% @articles.each do |article| %>
    <div style="border:none; border-radius:1rem; background-color:#fff;
                box-shadow:0 4px 10px rgba(0,0,0,0.05); margin-bottom:25px;
                padding:25px; transition:transform 0.3s ease, box-shadow 0.3s ease;">

      <!-- User Info (only show if not on user profile) -->
      <% if !defined?(@user) && article.user.present? %>
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
          <%= link_to user_path(article.user), style: "display:flex; align-items:center; gap:10px; text-decoration:none;" do %>
            <% if article.user.email.present? %>
              <%= image_tag gravatar_for(article.user),
                    alt: article.user.username,
                    onerror: "this.onerror=null;this.src='#{asset_path('placeholder.png')}';",
                    style: "width:40px; height:40px; border-radius:50%; object-fit:cover;" %>
            <% end %>

            <span style="font-weight:700; font-size:1.1rem; color:#0d6efd;">
              <%= article.user.username %>
            </span>
          <% end %>
        </div>
      <% elsif article.user.blank? %>
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
          <div style="font-size:1.6rem;">ðŸ‘¤</div>
          <span style="font-weight:700; font-size:1.1rem; color:#6c757d;">@anonymous</span>
        </div>
      <% end %>

      <!-- Title -->
      <h4 style="font-weight:600; color:#212529; margin-bottom:12px;">
        <%= article.title %>
      </h4>

      <!-- Description -->
      <p style="color:#6c757d; font-size:0.95rem; margin-bottom:15px; line-height:1.6;">
        <%= truncate(article.description, length:160) %>
      </p>

      <!-- Created/Updated info -->
      <div style="color:#adb5bd; font-size:0.85rem; margin-bottom:20px;">
        ðŸ•’ Created <%= time_ago_in_words(article.created_at) %> ago
        <br>
        ðŸ”„ Updated <%= time_ago_in_words(article.updated_at) %> ago
      </div>

      <!-- Buttons -->
      <div style="display:flex; flex-wrap:wrap; gap:10px;">
        <%= link_to 'View', article_path(article),
              style: 'border:1px solid #0d6efd; color:#0d6efd; background:white; border-radius:50px; padding:8px 20px; font-weight:500; font-size:0.9rem; text-decoration:none; transition:all 0.2s ease;' %>

        <%= link_to 'Edit', edit_article_path(article),
              style: 'border:1px solid #6c757d; color:#6c757d; background:white; border-radius:50px; padding:8px 20px; font-weight:500; font-size:0.9rem; text-decoration:none; transition:all 0.2s ease;' %>

        <%= button_to 'Delete', article_path(article),
              method: :delete,
              form: { data: { turbo_confirm: 'Are you sure?' } },
              style: 'border:1px solid #dc3545; color:#dc3545; background:white; border-radius:50px; padding:8px 20px; font-weight:500; font-size:0.9rem; transition:all 0.2s ease; display:inline-block;' %>
      </div>
    </div>
  <% end %>

  <% if !defined?(@user) %>
    <div style="text-align:center; margin-top:60px; padding-bottom:80px;">
      <%= link_to 'âž• New Article', new_article_path,
            style: 'border:none; background-color:#0d6efd; color:white; border-radius:50px; padding:12px 32px; font-family:Poppins,sans-serif; font-weight:500; font-size:1rem; text-decoration:none; letter-spacing:0.5px; transition:background 0.3s ease;' %>
    </div>
  <% end %>
</div>
