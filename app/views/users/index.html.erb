<div style="max-width:900px; margin:60px auto; font-family:'Poppins',sans-serif;">
  <h2 style="text-align:center; font-weight:700; color:#0d6efd; margin-bottom:40px;">All Users</h2>

  <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:25px;">
    <% @users.each do |user| %>
      <div style="background:white; border-radius:1rem; box-shadow:0 4px 15px rgba(0,0,0,0.05); padding:25px; text-align:center;">
        
        <%= image_tag gravatar_for(user),
              alt: user.username,
              onerror: "this.onerror=null;this.src='#{asset_path('placeholder.png')}';",
              style: "width:100px; height:100px; border-radius:50%; object-fit:cover; margin-bottom:10px;" %>

        <h5 style="font-weight:600; color:#0d6efd; margin-bottom:8px;">
          <%= link_to user.username, user_path(user), style: 'text-decoration:none; color:#0d6efd;' %>
        </h5>

        <p style="font-size:0.9rem; color:#6c757d; margin-bottom:6px;">
          Member since <%= time_ago_in_words(user.created_at) %> ago
        </p>

        <p style="font-size:0.9rem; color:#495057; margin-bottom:15px;">
          üìù <%= pluralize(user.articles.count, "Article") %>
        </p>

        <%= link_to 'View Profile', user_path(user),
              style: "display:inline-block; border:1px solid #0d6efd; color:#0d6efd; border-radius:50px; padding:5px 15px; font-size:0.85rem; text-decoration:none; font-weight:500; transition:all 0.2s ease;" %>

        <% if logged_in? %>
          <div style="margin-top:12px;">
          <% if current_user == user || current_user.admin? %>
              <%= link_to 'Edit Profile', edit_user_path(user),
                    style: 'display:inline-block; margin-bottom:10px; margin-right:6px; border:1px solid #198754; color:#198754; border-radius:50px; padding:5px 15px; font-size:0.85rem; text-decoration:none; font-weight:500; transition:all 0.2s ease;' %>
          <% end %>
          <% if current_user.admin? %>
              <%= button_to 'Delete Account', user_path(user),
                    method: :delete,
                    data: { confirm: "Are you sure you want to delete your account?" },
                    style: 'display:inline-block; background:#dc3545; color:white; border:none; border-radius:50px; padding:6px 15px; font-size:0.85rem; font-weight:500; cursor:pointer; transition:background 0.2s ease;' %>
          <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <!-- Pagination -->
  <div style="text-align:center; margin-top:40px;">
    <%= will_paginate @users, renderer: WillPaginate::ActionView::LinkRenderer,
                      inner_window: 1, outer_window: 0,
                      previous_label: '‚Üê Prev', next_label: 'Next ‚Üí',
                      class: 'pagination' %>
  </div>
</div>

<!-- Inline pagination style -->
<style>
  .pagination {
    display: inline-flex;
    list-style: none;
    padding: 0;
    border-radius: 50px;
    gap: 8px;
  }

  .pagination a, .pagination span {
    display: inline-block;
    padding: 8px 14px;
    border-radius: 50px;
    border: 1px solid #dee2e6;
    color: #0d6efd;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.2s ease;
  }

  .pagination a:hover {
    background-color: #0d6efd;
    color: white;
  }

  .pagination .current {
    background-color: #0d6efd;
    color: white;
    border: 1px solid #0d6efd;
  }

  .pagination .disabled {
    color: #adb5bd;
    border-color: #dee2e6;
    cursor: not-allowed;
  }
</style>
